{"ast":null,"code":"import { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { AddDialogComponent, DeleteDialogComponent } from '../add-dialog/add-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../firebase/database.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/material/paginator\";\nimport * as i9 from \"@angular/material/progress-spinner\";\nimport * as i10 from \"@angular/material/sort\";\nimport * as i11 from \"@angular/material/table\";\n\nfunction MTableComponent_div_7_mat_spinner_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\");\n  }\n}\n\nfunction MTableComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtemplate(1, MTableComponent_div_7_mat_spinner_1_Template, 1, 0, \"mat-spinner\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isLoadingResults);\n  }\n}\n\nfunction MTableComponent_th_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 23);\n    i0.ɵɵtext(1, \"Index\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MTableComponent_td_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r21 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r21.position);\n  }\n}\n\nfunction MTableComponent_th_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 23);\n    i0.ɵɵtext(1, \"Name\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MTableComponent_td_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r22 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r22.name);\n  }\n}\n\nfunction MTableComponent_th_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \"Count\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MTableComponent_td_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r23 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r23.count);\n  }\n}\n\nfunction MTableComponent_th_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \"Package\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MTableComponent_td_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r24 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r24.package);\n  }\n}\n\nfunction MTableComponent_th_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 23);\n    i0.ɵɵtext(1, \"Category\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MTableComponent_td_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r25 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r25.category);\n  }\n}\n\nfunction MTableComponent_th_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \"Description\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MTableComponent_td_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r26 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r26.description);\n  }\n}\n\nfunction MTableComponent_th_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \"Link\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MTableComponent_td_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24)(1, \"a\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const element_r27 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"href\", element_r27.link, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r27.link);\n  }\n}\n\nfunction MTableComponent_th_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \"Action\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MTableComponent_td_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 24)(1, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function MTableComponent_td_33_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r31);\n      const element_r28 = restoredCtx.$implicit;\n      const i_r29 = restoredCtx.index;\n      const ctx_r30 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r30.editComponent(element_r28, i_r29));\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"edit\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function MTableComponent_td_33_Template_button_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r31);\n      const element_r28 = restoredCtx.$implicit;\n      const i_r29 = restoredCtx.index;\n      const ctx_r32 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r32.deleteComponent(element_r28, i_r29));\n    });\n    i0.ɵɵelementStart(5, \"mat-icon\");\n    i0.ɵɵtext(6, \"delete\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction MTableComponent_tr_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 29);\n  }\n}\n\nfunction MTableComponent_tr_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 30);\n  }\n}\n\nconst _c0 = function () {\n  return [10, 20, 50, 100];\n};\n\nexport let MTableComponent = /*#__PURE__*/(() => {\n  class MTableComponent {\n    constructor(service, dialog) {\n      this.service = service;\n      this.dialog = dialog;\n      this.displayedColumns = ['position', 'name', 'count', 'package', 'category', 'description', 'link', 'action'];\n      this.dataSource = new MatTableDataSource();\n      this.isLoadingResults = true;\n      console.log('MTableComponent');\n      service.getComponents().subscribe(list => {\n        console.log('on list: ', list);\n        this.isLoadingResults = false;\n        this.dataSource.data = list.sort((a, b) => a.position - b.position);\n      });\n    }\n\n    ngAfterViewInit() {\n      this.dataSource.paginator = this.paginator;\n      this.dataSource.sort = this.sort;\n    }\n\n    applyFilter(event) {\n      const filterValue = event.target.value;\n      this.dataSource.filter = filterValue.trim().toLowerCase();\n      this.paginator.firstPage();\n    }\n\n    editComponent(component, i) {\n      console.log('editComponent', i, component);\n      const dialogRef = this.dialog.open(AddDialogComponent, {\n        data: component\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        console.log('edit-dialog-result:', result);\n\n        if (result) {\n          this.service.saveComponent(result).subscribe({\n            next: () => console.log('save success'),\n            error: e => console.error('save error', e)\n          });\n        }\n      });\n    }\n\n    deleteComponent(component, i) {\n      console.log('deleteComponent', i, component);\n      const dialogRef = this.dialog.open(DeleteDialogComponent);\n      dialogRef.afterClosed().subscribe(result => {\n        console.log('delete-dialog-result:', result);\n\n        if (result) {\n          this.service.deleteComponent(component.id).subscribe({\n            next: () => console.log('delete success'),\n            error: e => console.error('delete error', e)\n          });\n        }\n      });\n    }\n\n  }\n\n  MTableComponent.ɵfac = function MTableComponent_Factory(t) {\n    return new (t || MTableComponent)(i0.ɵɵdirectiveInject(i1.DatabaseService), i0.ɵɵdirectiveInject(i2.MatDialog));\n  };\n\n  MTableComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MTableComponent,\n    selectors: [[\"mtable\"]],\n    viewQuery: function MTableComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(MatSort, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n      }\n    },\n    decls: 37,\n    vars: 7,\n    consts: [[\"appearance\", \"standard\"], [\"matInput\", \"\", \"placeholder\", \"Ex. Regulator\", 3, \"keyup\"], [\"input\", \"\"], [1, \"mat-container\", \"mat-elevation-z8\"], [\"class\", \"mat-loading-shade\", 4, \"ngIf\"], [1, \"mat-table-container\"], [\"mat-table\", \"\", \"matSort\", \"\", \"matSortActive\", \"position\", \"matSortDirection\", \"asc\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"position\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"name\"], [\"matColumnDef\", \"count\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"package\"], [\"matColumnDef\", \"category\"], [\"matColumnDef\", \"description\"], [\"matColumnDef\", \"link\"], [\"matColumnDef\", \"action\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [3, \"length\", \"pageSizeOptions\"], [1, \"mat-loading-shade\"], [4, \"ngIf\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\"], [\"mat-header-cell\", \"\"], [\"target\", \"_blank\", \"rel\", \"noopener noreferrer\", 3, \"href\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Edit\", \"color\", \"primary\", 1, \"material-icons\", \"app-toolbar-menu\", \"edit-button\", 3, \"click\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Delete\", \"color\", \"warn\", 1, \"material-icons\", \"app-toolbar-menu\", \"delete-button\", 3, \"click\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function MTableComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\")(1, \"mat-form-field\", 0)(2, \"mat-label\");\n        i0.ɵɵtext(3, \"Filter\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"input\", 1, 2);\n        i0.ɵɵlistener(\"keyup\", function MTableComponent_Template_input_keyup_4_listener($event) {\n          return ctx.applyFilter($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"div\", 3);\n        i0.ɵɵtemplate(7, MTableComponent_div_7_Template, 2, 1, \"div\", 4);\n        i0.ɵɵelementStart(8, \"div\", 5)(9, \"table\", 6);\n        i0.ɵɵelementContainerStart(10, 7);\n        i0.ɵɵtemplate(11, MTableComponent_th_11_Template, 2, 0, \"th\", 8);\n        i0.ɵɵtemplate(12, MTableComponent_td_12_Template, 2, 1, \"td\", 9);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(13, 10);\n        i0.ɵɵtemplate(14, MTableComponent_th_14_Template, 2, 0, \"th\", 8);\n        i0.ɵɵtemplate(15, MTableComponent_td_15_Template, 2, 1, \"td\", 9);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(16, 11);\n        i0.ɵɵtemplate(17, MTableComponent_th_17_Template, 2, 0, \"th\", 12);\n        i0.ɵɵtemplate(18, MTableComponent_td_18_Template, 2, 1, \"td\", 9);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(19, 13);\n        i0.ɵɵtemplate(20, MTableComponent_th_20_Template, 2, 0, \"th\", 12);\n        i0.ɵɵtemplate(21, MTableComponent_td_21_Template, 2, 1, \"td\", 9);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(22, 14);\n        i0.ɵɵtemplate(23, MTableComponent_th_23_Template, 2, 0, \"th\", 8);\n        i0.ɵɵtemplate(24, MTableComponent_td_24_Template, 2, 1, \"td\", 9);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(25, 15);\n        i0.ɵɵtemplate(26, MTableComponent_th_26_Template, 2, 0, \"th\", 12);\n        i0.ɵɵtemplate(27, MTableComponent_td_27_Template, 2, 1, \"td\", 9);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(28, 16);\n        i0.ɵɵtemplate(29, MTableComponent_th_29_Template, 2, 0, \"th\", 12);\n        i0.ɵɵtemplate(30, MTableComponent_td_30_Template, 3, 2, \"td\", 9);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(31, 17);\n        i0.ɵɵtemplate(32, MTableComponent_th_32_Template, 2, 0, \"th\", 12);\n        i0.ɵɵtemplate(33, MTableComponent_td_33_Template, 7, 0, \"td\", 9);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(34, MTableComponent_tr_34_Template, 1, 0, \"tr\", 18);\n        i0.ɵɵtemplate(35, MTableComponent_tr_35_Template, 1, 0, \"tr\", 19);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(36, \"mat-paginator\", 20);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoadingResults);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(25);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"length\", 0)(\"pageSizeOptions\", i0.ɵɵpureFunction0(6, _c0));\n      }\n    },\n    dependencies: [i3.NgIf, i4.MatButton, i5.MatFormField, i5.MatLabel, i6.MatIcon, i7.MatInput, i8.MatPaginator, i9.MatProgressSpinner, i10.MatSort, i10.MatSortHeader, i11.MatTable, i11.MatHeaderCellDef, i11.MatHeaderRowDef, i11.MatColumnDef, i11.MatCellDef, i11.MatRowDef, i11.MatHeaderCell, i11.MatCell, i11.MatHeaderRow, i11.MatRow],\n    styles: [\"table[_ngcontent-%COMP%]{width:100%}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{padding:0 8px}.mat-container[_ngcontent-%COMP%]{position:relative}.mat-table-container[_ngcontent-%COMP%]{position:relative;min-height:40px;overflow:auto}.mat-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}\"]\n  });\n  return MTableComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}